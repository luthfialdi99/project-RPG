{
  "associatedLayout": "Untitled scene",
  "lastChangeTimeStamp": 0,
  "name": "dialogue-system",
  "events": [
    {
      "type": "BuiltinCommonInstructions::Standard",
      "conditions": [
        {
          "type": {
            "value": "DepartScene"
          },
          "parameters": [
            ""
          ]
        }
      ],
      "actions": [
        {
          "type": {
            "value": "Create"
          },
          "parameters": [
            "",
            "dialogueArrow",
            "dialogue.CenterX()",
            "dialogue.CenterY()",
            ""
          ]
        },
        {
          "type": {
            "value": "SetSize"
          },
          "parameters": [
            "dialogueArrow",
            "10",
            "10"
          ]
        },
        {
          "type": {
            "value": "ChangePlan"
          },
          "parameters": [
            "dialogueArrow",
            "=",
            "dialogue.ZOrder()+1"
          ]
        }
      ]
    },
    {
      "type": "BuiltinCommonInstructions::Standard",
      "conditions": [],
      "actions": [
        {
          "type": {
            "value": "ChangePlan"
          },
          "parameters": [
            "dialogueShape",
            "=",
            "dialogue.ZOrder()-1"
          ]
        },
        {
          "type": {
            "value": "Cache"
          },
          "parameters": [
            "dialogueBoxes_lr"
          ]
        }
      ]
    },
    {
      "type": "BuiltinCommonInstructions::Standard",
      "conditions": [
        {
          "type": {
            "value": "VarObjet"
          },
          "parameters": [
            "dialogue",
            "dialogue_id",
            "=",
            "NPC.Variable(dialogue_id)"
          ]
        }
      ],
      "actions": [
        {
          "type": {
            "value": "SetCenter"
          },
          "parameters": [
            "dialogue",
            "=",
            "NPC.CenterX()",
            "=",
            "NPC.CenterY()-NPCAnim.Height()-30"
          ]
        }
      ],
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "Animation"
              },
              "parameters": [
                "dialogueBoxes_lr",
                "=",
                "0"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "MettreXY"
              },
              "parameters": [
                "dialogueBoxes_lr",
                "=",
                "dialogue.X()-10",
                "=",
                "dialogue.Y()-5"
              ]
            },
            {
              "type": {
                "value": "ChangeWidth"
              },
              "parameters": [
                "dialogueBoxes_lr",
                "=",
                "dialogue.Width()+20"
              ]
            },
            {
              "type": {
                "value": "ChangeHeight"
              },
              "parameters": [
                "dialogueBoxes_lr",
                "=",
                "dialogue.Height()+20"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "PrimitiveDrawing::RoundedRectangle"
              },
              "parameters": [
                "dialogueShape",
                "dialogueBoxes_lr.X()",
                "dialogueBoxes_lr.Y()",
                "dialogueBoxes_lr.X()+dialogueBoxes_lr.Width()",
                "dialogueBoxes_lr.Y()+dialogueBoxes_lr.Height()",
                "1000"
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [],
          "actions": [
            {
              "type": {
                "value": "SetCenter"
              },
              "parameters": [
                "dialogueArrow",
                "=",
                "dialogue.CenterX()",
                "=",
                "15+dialogue.CenterY()+dialogue.Height()/2"
              ]
            },
            {
              "type": {
                "value": "Montre"
              },
              "parameters": [
                "dialogueArrow",
                ""
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "BuiltinCommonInstructions::Standard",
      "conditions": [
        {
          "type": {
            "value": "VarObjet"
          },
          "parameters": [
            "dialogue",
            "dialogue_id",
            "=",
            "0"
          ]
        }
      ],
      "actions": [
        {
          "type": {
            "value": "SetCenter"
          },
          "parameters": [
            "dialogue",
            "=",
            "0",
            "=",
            "0"
          ]
        },
        {
          "type": {
            "value": "Cache"
          },
          "parameters": [
            "dialogueBoxes_lr"
          ]
        },
        {
          "type": {
            "value": "Cache"
          },
          "parameters": [
            "dialogueArrow"
          ]
        }
      ]
    },
    {
      "type": "BuiltinCommonInstructions::ForEach",
      "object": "NPC",
      "conditions": [],
      "actions": [],
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "PickNearest"
              },
              "parameters": [
                "NPC",
                "player.CenterX()",
                "player.CenterY()",
                ""
              ]
            },
            {
              "type": {
                "value": "Distance"
              },
              "parameters": [
                "NPC",
                "player",
                "50",
                ""
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "VarObjet"
                  },
                  "parameters": [
                    "NPC",
                    "dialogue_active",
                    "=",
                    "0"
                  ]
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "VarObjet"
                      },
                      "parameters": [
                        "NPC",
                        "dialogue_id",
                        ">",
                        "0"
                      ]
                    }
                  ],
                  "actions": [],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "KeyReleased"
                          },
                          "parameters": [
                            "",
                            "e"
                          ]
                        }
                      ],
                      "actions": [
                        {
                          "type": {
                            "value": "ModVarObjet"
                          },
                          "parameters": [
                            "dialogue",
                            "dialogue_id",
                            "=",
                            "NPC.Variable(dialogue_id)"
                          ]
                        },
                        {
                          "type": {
                            "value": "ModVarObjet"
                          },
                          "parameters": [
                            "NPC",
                            "dialogue_active",
                            "=",
                            "1"
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "VarObjet"
              },
              "parameters": [
                "NPC",
                "dialogue_id",
                "=",
                "1"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "AutoTyping::BBText_AutoTyping::IsCharacterJustAdded"
                  },
                  "parameters": [
                    "dialogue",
                    "BBText_AutoTyping",
                    ""
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "ResetObjectTimer"
                  },
                  "parameters": [
                    "dialogue",
                    "\"dt\""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "VarObjet"
                  },
                  "parameters": [
                    "NPC",
                    "dialogue_active",
                    ">=",
                    "1"
                  ]
                },
                {
                  "type": {
                    "value": "CompareObjectTimer"
                  },
                  "parameters": [
                    "dialogue",
                    "\"dt\"",
                    ">",
                    "0.5"
                  ]
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "KeyReleased"
                      },
                      "parameters": [
                        "",
                        "e"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "ModVarObjet"
                      },
                      "parameters": [
                        "NPC",
                        "dialogue_active",
                        "+",
                        "1"
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "VarObjet"
                  },
                  "parameters": [
                    "NPC",
                    "dialogue_active",
                    "=",
                    "2"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "BBText::SetBBText"
                  },
                  "parameters": [
                    "dialogue",
                    "=",
                    "\"hellasdwo bro\""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "VarObjet"
                  },
                  "parameters": [
                    "NPC",
                    "dialogue_active",
                    "=",
                    "3"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "BBText::SetBBText"
                  },
                  "parameters": [
                    "dialogue",
                    "=",
                    "\"whatchu doin'?\""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "VarObjet"
                  },
                  "parameters": [
                    "NPC",
                    "dialogue_active",
                    "=",
                    "4"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "BBText::SetBBText"
                  },
                  "parameters": [
                    "dialogue",
                    "=",
                    "\"Bored, aren'tcha?\""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "VarObjet"
                  },
                  "parameters": [
                    "NPC",
                    "dialogue_active",
                    "=",
                    "5"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "BBText::SetBBText"
                  },
                  "parameters": [
                    "dialogue",
                    "=",
                    "\"Let's try this.\nHelloooo...\""
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "VarObjet"
                  },
                  "parameters": [
                    "NPC",
                    "dialogue_active",
                    "=",
                    "6"
                  ]
                }
              ],
              "actions": [
                {
                  "type": {
                    "value": "ModVarObjet"
                  },
                  "parameters": [
                    "dialogue",
                    "dialogue_id",
                    "=",
                    "0"
                  ]
                },
                {
                  "type": {
                    "value": "ModVarObjet"
                  },
                  "parameters": [
                    "NPC",
                    "dialogue_active",
                    "=",
                    "0"
                  ]
                }
              ]
            }
          ]
        }
      ]
    }
  ]
}