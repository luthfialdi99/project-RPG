{
  "associatedLayout": "Untitled scene",
  "lastChangeTimeStamp": 0,
  "name": "item-drop",
  "events": [
    {
      "type": "BuiltinCommonInstructions::Standard",
      "conditions": [],
      "actions": [
        {
          "type": {
            "value": "PrimitiveDrawing::RoundedRectangle"
          },
          "parameters": [
            "buttonPromptShape",
            "buttonPrompt.X()-10",
            "buttonPrompt.Y()-10",
            "buttonPrompt.X()+buttonPrompt.Width()+10",
            "buttonPrompt.Y()+buttonPrompt.Height()+10",
            "255"
          ]
        },
        {
          "type": {
            "value": "ChangePlan"
          },
          "parameters": [
            "buttonPromptShape",
            "=",
            "buttonPrompt.ZOrder()-1"
          ]
        },
        {
          "type": {
            "value": "SetEffectDoubleParameter"
          },
          "parameters": [
            "item",
            "\"Effect\"",
            "\"thickness\"",
            "0"
          ]
        }
      ]
    },
    {
      "type": "BuiltinCommonInstructions::Standard",
      "conditions": [
        {
          "type": {
            "value": "DepartScene"
          },
          "parameters": [
            ""
          ]
        }
      ],
      "actions": [
        {
          "type": {
            "value": "BBText::SetOpacity"
          },
          "parameters": [
            "buttonPrompt",
            "=",
            "0"
          ]
        },
        {
          "type": {
            "value": "PrimitiveDrawing::FillOpacity"
          },
          "parameters": [
            "buttonPromptShape",
            "=",
            "0"
          ]
        }
      ]
    },
    {
      "type": "BuiltinCommonInstructions::Standard",
      "conditions": [
        {
          "type": {
            "value": "PrimitiveDrawing::FillOpacity"
          },
          "parameters": [
            "buttonPromptShape",
            "<=",
            "200"
          ]
        }
      ],
      "actions": [
        {
          "type": {
            "value": "PrimitiveDrawing::FillOpacity"
          },
          "parameters": [
            "buttonPromptShape",
            "=",
            "buttonPrompt.GetOpacity()"
          ]
        }
      ]
    },
    {
      "type": "BuiltinCommonInstructions::ForEach",
      "object": "item",
      "conditions": [],
      "actions": [],
      "events": [
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "VarObjet"
              },
              "parameters": [
                "item",
                "dropped",
                "=",
                "1"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "PickNearest"
                  },
                  "parameters": [
                    "item",
                    "player.CenterX()",
                    "player.CenterY()",
                    ""
                  ]
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "CenterY"
                      },
                      "parameters": [
                        "item",
                        "<",
                        "player.CenterY()"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "ChangePlan"
                      },
                      "parameters": [
                        "item",
                        "=",
                        "player.ZOrder()+1"
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "CenterY"
                      },
                      "parameters": [
                        "item",
                        ">",
                        "player.CenterY()"
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "ChangePlan"
                      },
                      "parameters": [
                        "item",
                        "=",
                        "player.ZOrder()-1"
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "Distance"
                  },
                  "parameters": [
                    "player",
                    "item",
                    "100",
                    ""
                  ]
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "PickNearest"
                      },
                      "parameters": [
                        "item",
                        "player.CenterX()",
                        "player.CenterY()",
                        ""
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "SetEffectDoubleParameter"
                      },
                      "parameters": [
                        "item",
                        "\"Effect\"",
                        "\"thickness\"",
                        "item.Variable(effect)"
                      ]
                    },
                    {
                      "type": {
                        "value": "MettreX"
                      },
                      "parameters": [
                        "buttonPrompt",
                        "=",
                        "item.CenterX()+50"
                      ]
                    },
                    {
                      "type": {
                        "value": "MettreY"
                      },
                      "parameters": [
                        "buttonPrompt",
                        "=",
                        "item.Y()"
                      ]
                    },
                    {
                      "type": {
                        "value": "Tween::AddObjectOpacityTween"
                      },
                      "parameters": [
                        "buttonPrompt",
                        "Tween",
                        "\"bpV\"",
                        "255",
                        "\"linear\"",
                        "300",
                        ""
                      ]
                    },
                    {
                      "type": {
                        "value": "Tween::AddObjectVariableTween"
                      },
                      "parameters": [
                        "item",
                        "Tween",
                        "\"outlineEffect2\"",
                        "effect",
                        "1",
                        "0",
                        "\"linear\"",
                        "300",
                        ""
                      ]
                    }
                  ],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "KeyReleased"
                          },
                          "parameters": [
                            "",
                            "e"
                          ]
                        }
                      ],
                      "actions": [
                        {
                          "type": {
                            "value": "ModVarObjet"
                          },
                          "parameters": [
                            "item",
                            "dropped",
                            "=",
                            "2"
                          ]
                        }
                      ],
                      "events": [
                        {
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [
                            {
                              "type": {
                                "value": "VarGlobal"
                              },
                              "parameters": [
                                "hint_itemToInventory",
                                "=",
                                "0"
                              ]
                            }
                          ],
                          "actions": [
                            {
                              "type": {
                                "value": "ModVarGlobal"
                              },
                              "parameters": [
                                "hint_itemToInventory",
                                "=",
                                "1"
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Knife",
              "comment2": ""
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "VarObjet"
                  },
                  "parameters": [
                    "item",
                    "itemType",
                    "=",
                    "1"
                  ]
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "ChangeAnimation"
                      },
                      "parameters": [
                        "item",
                        "=",
                        "0"
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "Distance"
                      },
                      "parameters": [
                        "player",
                        "item",
                        "100",
                        ""
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "BBText::SetBBText"
                      },
                      "parameters": [
                        "buttonPrompt",
                        "=",
                        "\"[size=14][i]Knife[/i][/size]\""
                      ]
                    }
                  ]
                }
              ]
            },
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "Health Potion",
              "comment2": ""
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "VarObjet"
                  },
                  "parameters": [
                    "item",
                    "itemType",
                    "=",
                    "2"
                  ]
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [],
                  "actions": [
                    {
                      "type": {
                        "value": "ChangeAnimation"
                      },
                      "parameters": [
                        "item",
                        "=",
                        "1"
                      ]
                    }
                  ]
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "Distance"
                      },
                      "parameters": [
                        "player",
                        "item",
                        "100",
                        ""
                      ]
                    }
                  ],
                  "actions": [
                    {
                      "type": {
                        "value": "BBText::SetBBText"
                      },
                      "parameters": [
                        "buttonPrompt",
                        "=",
                        "\"[size=14][i]Health Potion[/i][/size]\""
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "VarObjet"
              },
              "parameters": [
                "item",
                "dropped",
                "=",
                "2"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ModVarGlobal"
              },
              "parameters": [
                "invItemCount",
                "+",
                "1"
              ]
            },
            {
              "type": {
                "value": "ChangeLayer"
              },
              "parameters": [
                "item",
                "\"UI\""
              ]
            },
            {
              "type": {
                "value": "PrimitiveDrawing::FillOpacity"
              },
              "parameters": [
                "buttonPromptShape",
                "-",
                "55"
              ]
            },
            {
              "type": {
                "value": "Tween::AddObjectOpacityTween"
              },
              "parameters": [
                "buttonPrompt",
                "Tween",
                "\"bpNV\"",
                "0",
                "\"linear\"",
                "50",
                ""
              ]
            },
            {
              "type": {
                "value": "Tween::AddObjectVariableTween"
              },
              "parameters": [
                "item",
                "Tween",
                "\"outlineEffect\"",
                "effect",
                "0",
                "1",
                "\"linear\"",
                "300",
                ""
              ]
            }
          ],
          "events": [
            {
              "type": "BuiltinCommonInstructions::ForEach",
              "object": "invBox",
              "conditions": [],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Comment",
                  "color": {
                    "b": 109,
                    "g": 230,
                    "r": 255,
                    "textB": 0,
                    "textG": 0,
                    "textR": 0
                  },
                  "comment": "insert item to inventory",
                  "comment2": ""
                },
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "VarObjet"
                      },
                      "parameters": [
                        "invBox",
                        "invBox_Occupied",
                        "=",
                        "0"
                      ]
                    }
                  ],
                  "actions": [],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "VarObjet"
                          },
                          "parameters": [
                            "invBox",
                            "invBox_id",
                            "=",
                            "GlobalVariable(invItemCount)"
                          ]
                        }
                      ],
                      "actions": [
                        {
                          "type": {
                            "value": "MettreAutour"
                          },
                          "parameters": [
                            "item",
                            "invBox",
                            "0",
                            "0"
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "VarObjet"
              },
              "parameters": [
                "item",
                "dropped",
                "=",
                "3"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "SetCenterY"
              },
              "parameters": [
                "item",
                "=",
                "invBox.CenterY()"
              ]
            }
          ],
          "events": [
            {
              "type": "BuiltinCommonInstructions::Comment",
              "color": {
                "b": 109,
                "g": 230,
                "r": 255,
                "textB": 0,
                "textG": 0,
                "textR": 0
              },
              "comment": "drop item",
              "comment2": ""
            },
            {
              "type": "BuiltinCommonInstructions::Standard",
              "conditions": [
                {
                  "type": {
                    "value": "Visible"
                  },
                  "parameters": [
                    "InvDropDownActionText"
                  ]
                },
                {
                  "type": {
                    "value": "SourisSurObjet"
                  },
                  "parameters": [
                    "InvDropDownActionText",
                    "",
                    "",
                    ""
                  ]
                },
                {
                  "type": {
                    "value": "LayerVisible"
                  },
                  "parameters": [
                    "",
                    "\"UI\""
                  ]
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::ForEach",
                  "object": "InvDropDownActionText",
                  "conditions": [
                    {
                      "type": {
                        "value": "VarObjet"
                      },
                      "parameters": [
                        "InvDropDownActionText",
                        "id",
                        "=",
                        "2"
                      ]
                    },
                    {
                      "type": {
                        "value": "MouseButtonReleased"
                      },
                      "parameters": [
                        "",
                        "Left"
                      ]
                    }
                  ],
                  "actions": [],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::ForEach",
                      "object": "invBox",
                      "conditions": [
                        {
                          "type": {
                            "value": "VarObjet"
                          },
                          "parameters": [
                            "invBox",
                            "invBox_id",
                            "=",
                            "GlobalVariable(item_toDrop)"
                          ]
                        },
                        {
                          "type": {
                            "value": "VarObjet"
                          },
                          "parameters": [
                            "invBox",
                            "invBox_Occupied",
                            "=",
                            "1"
                          ]
                        }
                      ],
                      "actions": [],
                      "events": [
                        {
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [
                            {
                              "type": {
                                "value": "CollisionNP"
                              },
                              "parameters": [
                                "item",
                                "invBox",
                                "",
                                "",
                                ""
                              ]
                            },
                            {
                              "type": {
                                "value": "Layer"
                              },
                              "parameters": [
                                "item",
                                "\"UI\""
                              ]
                            }
                          ],
                          "actions": [
                            {
                              "type": {
                                "value": "ModVarObjet"
                              },
                              "parameters": [
                                "invBox",
                                "invBox_Equipped",
                                "=",
                                "0"
                              ]
                            },
                            {
                              "type": {
                                "value": "ModVarObjet"
                              },
                              "parameters": [
                                "invBox",
                                "invBox_itemQty",
                                "=",
                                "0"
                              ]
                            },
                            {
                              "type": {
                                "value": "ModVarObjet"
                              },
                              "parameters": [
                                "item",
                                "dropped",
                                "=",
                                "4"
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "VarObjet"
              },
              "parameters": [
                "item",
                "dropped",
                "=",
                "4"
              ]
            }
          ],
          "actions": [],
          "events": [
            {
              "type": "BuiltinCommonInstructions::ForEach",
              "object": "invBox",
              "conditions": [
                {
                  "type": {
                    "value": "VarObjet"
                  },
                  "parameters": [
                    "invBox",
                    "invBox_id",
                    "=",
                    "GlobalVariable(item_toDrop)"
                  ]
                }
              ],
              "actions": [],
              "events": [
                {
                  "type": "BuiltinCommonInstructions::Standard",
                  "conditions": [
                    {
                      "type": {
                        "value": "Layer"
                      },
                      "parameters": [
                        "item",
                        "\"UI\""
                      ]
                    },
                    {
                      "type": {
                        "value": "CollisionNP"
                      },
                      "parameters": [
                        "item",
                        "invBox",
                        "",
                        "",
                        ""
                      ]
                    }
                  ],
                  "actions": [],
                  "events": [
                    {
                      "type": "BuiltinCommonInstructions::Standard",
                      "conditions": [
                        {
                          "type": {
                            "value": "VarObjet"
                          },
                          "parameters": [
                            "invBox",
                            "invBox_Equipped",
                            "=",
                            "0"
                          ]
                        }
                      ],
                      "actions": [],
                      "events": [
                        {
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [
                            {
                              "type": {
                                "value": "VarObjet"
                              },
                              "parameters": [
                                "invBox",
                                "invBox_itemType",
                                "=",
                                "1"
                              ]
                            }
                          ],
                          "actions": [
                            {
                              "type": {
                                "value": "ModVarGlobal"
                              },
                              "parameters": [
                                "player_attackEnabled",
                                "=",
                                "0"
                              ]
                            },
                            {
                              "type": {
                                "value": "ModVarObjet"
                              },
                              "parameters": [
                                "invBox",
                                "invBox_itemType",
                                "=",
                                "0"
                              ]
                            },
                            {
                              "type": {
                                "value": "ModVarObjet"
                              },
                              "parameters": [
                                "invBox",
                                "invBox_Occupied",
                                "=",
                                "0"
                              ]
                            },
                            {
                              "type": {
                                "value": "ModVarObjet"
                              },
                              "parameters": [
                                "item",
                                "dropped",
                                "=",
                                "5"
                              ]
                            }
                          ]
                        },
                        {
                          "type": "BuiltinCommonInstructions::Standard",
                          "conditions": [
                            {
                              "type": {
                                "value": "VarObjet"
                              },
                              "parameters": [
                                "invBox",
                                "invBox_itemType",
                                "=",
                                "2"
                              ]
                            }
                          ],
                          "actions": [
                            {
                              "type": {
                                "value": "ModVarObjet"
                              },
                              "parameters": [
                                "invBox",
                                "invBox_itemType",
                                "=",
                                "0"
                              ]
                            },
                            {
                              "type": {
                                "value": "ModVarObjet"
                              },
                              "parameters": [
                                "invBox",
                                "invBox_Occupied",
                                "=",
                                "0"
                              ]
                            },
                            {
                              "type": {
                                "value": "ModVarObjet"
                              },
                              "parameters": [
                                "item",
                                "dropped",
                                "=",
                                "5"
                              ]
                            }
                          ]
                        }
                      ]
                    }
                  ]
                }
              ]
            }
          ]
        },
        {
          "type": "BuiltinCommonInstructions::Standard",
          "conditions": [
            {
              "type": {
                "value": "VarObjet"
              },
              "parameters": [
                "item",
                "dropped",
                "=",
                "5"
              ]
            }
          ],
          "actions": [
            {
              "type": {
                "value": "ModVarGlobal"
              },
              "parameters": [
                "invItemCount",
                "-",
                "3"
              ]
            },
            {
              "type": {
                "value": "ChangeLayer"
              },
              "parameters": [
                "item",
                "\"\""
              ]
            },
            {
              "type": {
                "value": "MettreXY"
              },
              "parameters": [
                "item",
                "=",
                "RandomInRange(player.X(),player.Width()+10)",
                "=",
                "RandomInRange(player.Y(),player.Height()+10)"
              ]
            },
            {
              "type": {
                "value": "ModVarObjet"
              },
              "parameters": [
                "item",
                "dropped",
                "=",
                "1"
              ]
            }
          ]
        }
      ]
    },
    {
      "type": "BuiltinCommonInstructions::Standard",
      "conditions": [
        {
          "type": {
            "inverted": true,
            "value": "Distance"
          },
          "parameters": [
            "player",
            "item",
            "100",
            ""
          ]
        }
      ],
      "actions": [
        {
          "type": {
            "value": "Tween::AddObjectOpacityTween"
          },
          "parameters": [
            "buttonPrompt",
            "Tween",
            "\"bpNV\"",
            "0",
            "\"linear\"",
            "50",
            ""
          ]
        },
        {
          "type": {
            "value": "Tween::AddObjectVariableTween"
          },
          "parameters": [
            "item",
            "Tween",
            "\"outlineEffect\"",
            "effect",
            "0",
            "1",
            "\"linear\"",
            "300",
            ""
          ]
        },
        {
          "type": {
            "value": "PrimitiveDrawing::FillOpacity"
          },
          "parameters": [
            "buttonPromptShape",
            "-",
            "55"
          ]
        }
      ]
    }
  ]
}